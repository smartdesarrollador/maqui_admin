<div class="container mx-auto p-4">
  <!-- Formulario -->
  <div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
    <h2 class="text-2xl font-bold mb-4">
      @if (isEditing()) { Editar Marca } @else { Nueva Marca }
    </h2>

    <form [formGroup]="marcaForm" (ngSubmit)="onSubmit()" class="space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Nombre -->
        <div>
          <label
            class="block text-gray-700 text-sm font-bold mb-2"
            for="nombre"
          >
            Nombre
          </label>
          <input
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            id="nombre"
            type="text"
            formControlName="nombre"
            placeholder="Nombre de la marca"
          />
        </div>

        <!-- Origen -->
        <div>
          <label
            class="block text-gray-700 text-sm font-bold mb-2"
            for="origen"
          >
            Origen
          </label>
          <input
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            id="origen"
            type="text"
            formControlName="origen"
            placeholder="País de origen"
          />
        </div>

        <!-- Fundación -->
        <div>
          <label
            class="block text-gray-700 text-sm font-bold mb-2"
            for="fundacion"
          >
            Fundación
          </label>
          <input
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            id="fundacion"
            type="date"
            formControlName="fundacion"
          />
        </div>

        <!-- Logo URL -->
        <div>
          <label class="block text-gray-700 text-sm font-bold mb-2" for="logo">
            URL del Logo
          </label>
          <input
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            id="logo"
            type="text"
            formControlName="logo"
            placeholder="URL del logo"
          />
        </div>
      </div>

      <!-- Botones -->
      <div class="flex justify-end space-x-2">
        <button
          type="button"
          (click)="resetForm()"
          class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
        >
          Cancelar
        </button>
        <button
          type="submit"
          [disabled]="!marcaForm.valid"
          class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50"
        >
          @if (isEditing()) { Actualizar } @else { Guardar }
        </button>
      </div>
    </form>
  </div>

  <!-- Lista de Marcas -->
  <div class="bg-white shadow-md rounded px-8 pt-6 pb-8">
    <h2 class="text-2xl font-bold mb-4">Marcas Registradas</h2>

    @if (isLoading()) {
    <div class="flex justify-center items-center py-4">
      <div
        class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"
      ></div>
    </div>
    } @else if (marcas().length === 0) {
    <p class="text-center text-gray-500 py-4">No hay marcas registradas</p>
    } @else {
    <div class="overflow-x-auto">
      <table class="min-w-full table-auto">
        <thead>
          <tr class="bg-gray-100">
            <!-- <th class="px-4 py-2">Logo</th> -->
            <th class="px-4 py-2">Nombre</th>
            <th class="px-4 py-2">Origen</th>
            <th class="px-4 py-2">Fundación</th>
            <th class="px-4 py-2">Acciones</th>
          </tr>
        </thead>
        <tbody>
          @for (marca of marcas(); track marca.id_marca) {
          <tr class="border-b hover:bg-gray-50">
            <!-- <td class="px-4 py-2">
              <img
                [src]="marca.logo"
                [alt]="marca.nombre"
                class="h-10 w-10 object-contain"
              />
            </td> -->
            <td class="px-4 py-2">{{ marca.nombre }}</td>
            <td class="px-4 py-2">{{ marca.origen }}</td>
            <td class="px-4 py-2">
              {{ marca.fundacion | date : "dd/MM/yyyy" }}
            </td>
            <td class="px-4 py-2">
              <div class="flex space-x-2">
                <button
                  (click)="editMarca(marca)"
                  class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-2 rounded"
                >
                  Editar
                </button>
                <button
                  (click)="deleteMarca(marca.id_marca)"
                  class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded"
                >
                  Eliminar
                </button>
              </div>
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
    }
  </div>
</div>
